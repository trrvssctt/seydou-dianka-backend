generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            String     @id @default(uuid()) @db.Uuid
  email         String     @unique
  password_hash String
  full_name     String?
  role          String     @default("editor")
  created_at    DateTime   @default(now())
  updated_at    DateTime   @updatedAt

  Profile       Profile?
  BlogPosts     BlogPost[]
  Media         Media[]
  AuditLogs     AuditLog[]
}

model Profile {
  id              String   @id @default(uuid()) @db.Uuid
  user_id         String   @unique @db.Uuid
  user            User     @relation(fields: [user_id], references: [id], onDelete: Cascade)
  display_name    String?
  headline        String?
  bio             String?
  location        String?
  website         String?
  avatar_url      String?
  socials         Json?
  seo_title       String?
  seo_description String?
  created_at      DateTime @default(now())
  updated_at      DateTime @updatedAt
}

model Skill {
  id         String @id @default(uuid()) @db.Uuid
  name       String
  category   String?
  level      Int?
  sort_order Int    @default(0)
}

model Service {
  id            String   @id @default(uuid()) @db.Uuid
  title         String
  short_desc    String?
  long_desc     String?
  features      Json?
  price_estimate String?
  slug          String   @unique
  icon          String?
  price         String?
  featured      Boolean  @default(false)
  active        Boolean  @default(true)
  order         Int      @default(0)
  created_at    DateTime @default(now())
  updated_at    DateTime @updatedAt
}

model Project {
  id           String   @id @default(uuid()) @db.Uuid
  title        String
  slug         String   @unique
  short_desc   String?
  description  String?
  role         String?
  tech_stack   String[]
  repo_url     String?
  live_url     String?
  cover_url    String?
  gallery      Json?
  published    Boolean  @default(true)
  featured     Boolean  @default(false)
  seo_title    String?
  seo_description String?
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
}

model BlogPost {
  id           String   @id @default(uuid()) @db.Uuid
  title        String
  slug         String   @unique
  excerpt      String?
  content      String?
  tags         String[]
  author_id    String?  @db.Uuid
  author       User?    @relation(fields: [author_id], references: [id])
  published_at DateTime?
  published    Boolean  @default(false)
  cover_url    String?
  seo_title    String?
  seo_description String?
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
}

model Media {
  id         String   @id @default(uuid()) @db.Uuid
  filename   String
  url        String
  mime       String?
  size_bytes BigInt?
  width      Int?
  height     Int?
  created_by String?  @db.Uuid
  creator    User?    @relation(fields: [created_by], references: [id])
  created_at DateTime @default(now())
}

model Message {
  id         String   @id @default(uuid()) @db.Uuid
  name       String?
  email      String?
  subject    String?
  message    String
  read       Boolean  @default(false)
  source     String?
  ip_address String?  @db.Inet
  created_at DateTime @default(now())
}

model Setting {
  key        String @id
  value      Json
  updated_at DateTime @default(now())
}

model AuditLog {
  id        BigInt   @id @default(autoincrement()) @db.BigInt
  user_id   String?  @db.Uuid
  user      User?    @relation(fields: [user_id], references: [id])
  action    String
  entity    String?
  entity_id String?
  payload   Json?
  created_at DateTime @default(now())
}
